<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Komputer Grafik</title>

    <!-- My Style -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
</head>

<body>

    <header>
        <div class="container">
            <nav class="navbar">
                <div class="logo"><a href="index.html">Komputer<span>Grafik</span></a></div>
                <div class="line"></div>
                <button onclick="toggleSidebar()" class="toggle-button" id="toggle-button"><i
                        data-feather="chevrons-right"></i></button>
            </nav>
        </div>
    </header>

    <aside class="sidebar" id="sidebar">
        <ul class="sidebar-menu">
            <!-- <button onclick=closeSidebar() id="close-btn"><i data-feather="x"></i></button> -->
            <h3 class="logo"><a href="index.html">DAFTAR ISI</a></h1>

                <li class="sidebar-item">
                    <a href="pert-1.html">
                        <i data-feather="book"></i>
                        <span>Pertemuan 1</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="pert-2.html">
                        <i data-feather="book"></i>
                        <span>Pertemuan 2</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="pert-3.html">
                        <i data-feather="book"></i>
                        <span>Pertemuan 3</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="pert-4.html">
                        <i data-feather="book"></i>
                        <span>Pertemuan 4</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="pert-5.html">
                        <i data-feather="book"></i>
                        <span>Pertemuan 5</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="pert-6.html">
                        <i data-feather="book"></i>
                        <span>Pertemuan 6</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="pert-7.html">
                        <i data-feather="book"></i>
                        <span>Pertemuan 7</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="pert-8.html">
                        <i data-feather="book"></i>
                        <span>Pertemuan 8</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="pert-9.html">
                        <i data-feather="book"></i>
                        <span>Pertemuan 9</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="pert-10.html">
                        <i data-feather="book"></i>
                        <span>Pertemuan 10</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="pert-11.html">
                        <i data-feather="book"></i>
                        <span>Pertemuan 11</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="pert-12.html">
                        <i data-feather="book"></i>
                        <span>Pertemuan 12</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="pert-13.html">
                        <i data-feather="book"></i>
                        <span>Pertemuan 13</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="pert-14.html">
                        <i data-feather="book"></i>
                        <span>Pertemuan 14</span>
                    </a>
                </li>
                <li class="sidebar-item active">
                    <a href="tugas-dashboard.html">
                        <i data-feather="book-open"></i>
                        <span>Tugas Dashboard</span>
                    </a>
                </li>
        </ul>
    </aside>

    <main>
        <section id="tugas-dashboard" class="section">
            <header>
                <h1>Simulasi Fisika: Gerak Proyektil</h1>
                <p>Visualisasi gerak parabola dengan analisis fisika menggunakan HTML/CSS/JS Native</p>
            </header>

            <div class="container">
                <div class="dashboard-grid">
                    <div class="card">
                        <h2>Kontrol Simulasi</h2>

                        <div class="controls">
                            <div class="control-group">
                                <h3>Parameter Fisika</h3>
                                <div class="input-group">
                                    <label for="velocity">Kecepatan Awal (m/s)</label>
                                    <input type="range" id="velocity" min="10" max="100" value="40">
                                    <div class="slider-container">
                                        <span>10</span>
                                        <input type="number" id="velocityValue" min="10" max="100" value="40">
                                        <span>100</span>
                                    </div>
                                </div>

                                <div class="input-group">
                                    <label for="angle">Sudut Elevasi (derajat)</label>
                                    <input type="range" id="angle" min="10" max="80" value="45">
                                    <div class="slider-container">
                                        <span>10°</span>
                                        <span class="slider-value" id="angleValue">45°</span>
                                        <span>80°</span>
                                    </div>
                                </div>

                                <div class="input-group">
                                    <label for="gravity">Percepatan Gravitasi (m/s²)</label>
                                    <input type="range" id="gravity" min="1" max="20" value="9.8" step="0.1">
                                    <div class="slider-container">
                                        <span>1</span>
                                        <span class="slider-value" id="gravityValue">9.8</span>
                                        <span>20</span>
                                    </div>
                                </div>
                            </div>

                            <div class="control-group">
                                <h3>Parameter Visual</h3>
                                <div class="input-group">
                                    <label for="trailLength">Panjang Jejak Lintasan</label>
                                    <input type="range" id="trailLength" min="10" max="200" value="100">
                                    <div class="slider-container">
                                        <span>Pendek</span>
                                        <span class="slider-value" id="trailValue">100</span>
                                        <span>Panjang</span>
                                    </div>
                                </div>

                                <div class="input-group">
                                    <label for="simulationSpeed">Kecepatan Simulasi</label>
                                    <input type="range" id="simulationSpeed" min="0.1" max="2" value="1" step="0.1">
                                    <div class="slider-container">
                                        <span>Lambat</span>
                                        <span class="slider-value" id="speedValue">1.0x</span>
                                        <span>Cepat</span>
                                    </div>
                                </div>

                                <div class="input-group">
                                    <label for="projectileSize">Ukuran Proyektil</label>
                                    <input type="range" id="projectileSize" min="0.5" max="3" value="1.5" step="0.1">
                                    <div class="slider-container">
                                        <span>Kecil</span>
                                        <span class="slider-value" id="sizeValue">1.5</span>
                                        <span>Besar</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="btn-group">
                            <button id="startBtn" class="btn">Mulai Simulasi</button>
                            <button id="pauseBtn" class="btn btn-accent">Jeda</button>
                            <button id="resetBtn" class="btn">Reset</button>
                        </div>

                        <div class="stats">
                            <div class="stat-card">
                                <div class="label">Waktu Terbang</div>
                                <div class="value" id="flightTime">0.00 s</div>
                            </div>
                            <div class="stat-card">
                                <div class="label">Jarak Maksimum</div>
                                <div class="value" id="maxDistance">0.00 m</div>
                            </div>
                            <div class="stat-card">
                                <div class="label">Ketinggian Maksimum</div>
                                <div class="value" id="maxHeight">0.00 m</div>
                            </div>
                            <div class="stat-card">
                                <div class="label">Kecepatan Maksimum</div>
                                <div class="value" id="maxVelocity">0.00 m/s</div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h2>Visualisasi</h2>
                        <div class="visualization">
                            <canvas id="simulationCanvas"></canvas>
                        </div>
                        <div class="legend">
                            <div class="legend-item">
                                <div class="legend-color legend-trajectory"></div>
                                <span>Lintasan Proyektil</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color legend-velocity"></div>
                                <span>Vektor Kecepatan</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h2>Grafik Lintasan</h2>
                        <div class="chart-container">
                            <canvas id="trajectoryChart"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <h2>Grafik Kecepatan</h2>
                        <div class="chart-container">
                            <canvas id="velocityChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="explanation">
                    <h3>Konsep Fisika Gerak Proyektil</h3>
                    <p>Gerak proyektil adalah bentuk gerakan yang dialami oleh suatu objek yang dilemparkan dekat
                        permukaan bumi dan bergerak sepanjang lintasan melengkung di bawah pengaruh gravitasi. Gerak ini
                        dapat dianalisis sebagai kombinasi gerak horizontal dengan kecepatan konstan dan gerak vertikal
                        dengan percepatan konstan.</p>

                    <ul>
                        <li><strong>Kecepatan Awal (v₀)</strong>: Kecepatan saat proyektil mulai bergerak</li>
                        <li><strong>Sudut Elevasi (θ)</strong>: Sudut antara arah kecepatan awal dengan bidang
                            horizontal</li>
                        <li><strong>Percepatan Gravitasi (g)</strong>: Percepatan konstan ke arah bawah (biasanya 9.8
                            m/s²)</li>
                        <li><strong>Waktu Terbang</strong>: Waktu total proyektil berada di udara (t = 2v₀·sinθ/g)</li>
                        <li><strong>Jarak Maksimum</strong>: Jarak horizontal maksimum yang ditempuh (R = v₀²·sin(2θ)/g)
                        </li>
                        <li><strong>Ketinggian Maksimum</strong>: Titik tertinggi yang dicapai proyektil (h =
                            (v₀·sinθ)²/(2g))</li>
                    </ul>
                </div>
            </div>

            <footer>
                <p>Simulasi Fisika Gerak Proyektil &copy; 2023 - Dibuat dengan HTML/CSS/JS Native</p>
            </footer>
        </section>
    </main>


    <script>
        feather.replace();

        // Variabel global
        let simulationCanvas, simulationCtx;
        let trajectoryChart, velocityChart;
        let trail = [];
        let simulationRunning = false;
        let simulationTime = 0;
        let lastTimestamp = 0;
        let animationFrameId = null;

        // Parameter simulasi
        let params = {
            velocity: 40,       // m/s
            angle: 45,          // derajat
            gravity: 9.8,       // m/s²
            trailLength: 100,   // jumlah titik
            simulationSpeed: 1, // faktor kecepatan
            projectileSize: 1.5 // skala
        };

        // Data untuk grafik
        let chartData = {
            time: [],
            xPos: [],
            yPos: [],
            velocity: []
        };

        // Inisialisasi canvas
        function initCanvas() {
            simulationCanvas = document.getElementById('simulationCanvas');
            simulationCtx = simulationCanvas.getContext('2d');

            // Set canvas size
            simulationCanvas.width = simulationCanvas.clientWidth;
            simulationCanvas.height = simulationCanvas.clientHeight;

            // Inisialisasi grafik
            initCharts();
        }

        // Inisialisasi grafik dengan canvas 2D
        function initCharts() {
            trajectoryChart = document.getElementById('trajectoryChart');
            velocityChart = document.getElementById('velocityChart');

            // Set size
            trajectoryChart.width = trajectoryChart.clientWidth;
            trajectoryChart.height = trajectoryChart.clientHeight;

            velocityChart.width = velocityChart.clientWidth;
            velocityChart.height = velocityChart.clientHeight;
        }

        // Reset simulasi
        function resetSimulation() {
            trail = [];
            chartData = { time: [], xPos: [], yPos: [], velocity: [] };
            simulationTime = 0;
            lastTimestamp = 0;

            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
            }

            // Reset grafik
            drawCharts();

            // Reset statistik
            updateStats(0, 0, 0, 0);

            // Gambar simulasi awal
            drawSimulation(0, 0);
        }

        // Menggambar grafik lintasan
        function drawTrajectoryChart() {
            const ctx = trajectoryChart.getContext('2d');
            const width = trajectoryChart.width;
            const height = trajectoryChart.height;
            const padding = 40;

            // Clear canvas
            ctx.clearRect(0, 0, width, height);

            if (chartData.time.length === 0) return;

            // Find max values
            const maxX = Math.max(...chartData.xPos);
            const maxY = Math.max(...chartData.yPos);
            const maxTime = Math.max(...chartData.time);

            // Draw axes
            ctx.beginPath();
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 1;

            // X-axis
            ctx.moveTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);

            // Y-axis
            ctx.moveTo(padding, height - padding);
            ctx.lineTo(padding, padding);
            ctx.stroke();

            // Draw labels
            ctx.fillStyle = '#000';
            ctx.font = '12px Arial';
            ctx.fillText('Waktu (s)', width / 2, height - 10);
            ctx.save();
            ctx.translate(10, height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Posisi (m)', 0, 0);
            ctx.restore();

            // Draw grid
            ctx.strokeStyle = '#f0f0f0';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 10; i++) {
                const x = padding + (i / 10) * (width - 2 * padding);
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, height - padding);
                ctx.stroke();

                const y = height - padding - (i / 10) * (height - 2 * padding);
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();
            }

            // Draw data
            ctx.beginPath();
            ctx.strokeStyle = '#2563eb';
            ctx.lineWidth = 2;
            for (let i = 0; i < chartData.time.length; i++) {
                const x = padding + (chartData.time[i] / maxTime) * (width - 2 * padding);
                const y = height - padding - (chartData.xPos[i] / maxX) * (height - 2 * padding);
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();

            ctx.beginPath();
            ctx.strokeStyle = '#ec4899';
            for (let i = 0; i < chartData.time.length; i++) {
                const x = padding + (chartData.time[i] / maxTime) * (width - 2 * padding);
                const y = height - padding - (chartData.yPos[i] / maxY) * (height - 2 * padding);
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();

            // Draw legend
            ctx.fillStyle = '#2563eb';
            ctx.fillRect(width - 150, padding, 10, 10);
            ctx.fillText('Posisi X', width - 130, padding + 8);

            ctx.fillStyle = '#ec4899';
            ctx.fillRect(width - 150, padding + 20, 10, 10);
            ctx.fillText('Posisi Y', width - 130, padding + 28);
        }

        // Menggambar grafik kecepatan
        function drawVelocityChart() {
            const ctx = velocityChart.getContext('2d');
            const width = velocityChart.width;
            const height = velocityChart.height;
            const padding = 40;

            // Clear canvas
            ctx.clearRect(0, 0, width, height);

            if (chartData.time.length === 0) return;

            // Find max values
            const maxVelocity = Math.max(...chartData.velocity);
            const maxTime = Math.max(...chartData.time);

            // Draw axes
            ctx.beginPath();
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 1;

            // X-axis
            ctx.moveTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);

            // Y-axis
            ctx.moveTo(padding, height - padding);
            ctx.lineTo(padding, padding);
            ctx.stroke();

            // Draw grid
            ctx.strokeStyle = '#f0f0f0';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 10; i++) {
                const x = padding + (i / 10) * (width - 2 * padding);
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, height - padding);
                ctx.stroke();

                const y = height - padding - (i / 10) * (height - 2 * padding);
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();
            }

            // Draw labels
            ctx.fillStyle = '#000';
            ctx.font = '12px Arial';
            ctx.fillText('Waktu (s)', width / 2, height - 10);
            ctx.save();
            ctx.translate(10, height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Kecepatan (m/s)', 0, 0);
            ctx.restore();

            // Draw data
            ctx.beginPath();
            ctx.strokeStyle = '#10b981';
            ctx.lineWidth = 2;
            for (let i = 0; i < chartData.time.length; i++) {
                const x = padding + (chartData.time[i] / maxTime) * (width - 2 * padding);
                const y = height - padding - (chartData.velocity[i] / maxVelocity) * (height - 2 * padding);
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();

            // Fill area under curve
            ctx.globalAlpha = 0.2;
            ctx.fillStyle = '#10b981';
            ctx.beginPath();
            ctx.moveTo(padding, height - padding);
            for (let i = 0; i < chartData.time.length; i++) {
                const x = padding + (chartData.time[i] / maxTime) * (width - 2 * padding);
                const y = height - padding - (chartData.velocity[i] / maxVelocity) * (height - 2 * padding);
                ctx.lineTo(x, y);
            }
            ctx.lineTo(width - padding, height - padding);
            ctx.closePath();
            ctx.fill();
            ctx.globalAlpha = 1.0;
        }

        function drawCharts() {
            drawTrajectoryChart();
            drawVelocityChart();
        }

        // Update statistik
        function updateStats(flightTime, maxDistance, maxHeight, maxVelocity) {
            document.getElementById('flightTime').textContent = flightTime.toFixed(2) + ' s';
            document.getElementById('maxDistance').textContent = maxDistance.toFixed(2) + ' m';
            document.getElementById('maxHeight').textContent = maxHeight.toFixed(2) + ' m';
            document.getElementById('maxVelocity').textContent = maxVelocity.toFixed(2) + ' m/s';
        }

        // Menggambar simulasi
        function drawSimulation(x, y) {
            const ctx = simulationCtx;
            const width = simulationCanvas.width;
            const height = simulationCanvas.height;

            // Clear canvas
            ctx.clearRect(0, 0, width, height);

            // Draw sky
            ctx.fillStyle = '#f0f8ff';
            ctx.fillRect(0, 0, width, height);

            // Draw ground
            ctx.fillStyle = '#7c3aed';
            ctx.globalAlpha = 0.2;
            ctx.fillRect(0, height - 50, width, 50);
            ctx.globalAlpha = 1.0;

            // Draw grid
            ctx.strokeStyle = '#cccccc';
            ctx.lineWidth = 1;
            for (let i = 0; i < width; i += 20) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, height - 50);
                ctx.stroke();
            }
            for (let i = 0; i < height - 50; i += 20) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(width, i);
                ctx.stroke();
            }

            // Draw trajectory
            if (trail.length > 1) {
                ctx.beginPath();
                ctx.strokeStyle = '#2563eb';
                ctx.lineWidth = 2;
                ctx.moveTo(trail[0].x, trail[0].y);
                for (let i = 1; i < trail.length; i++) {
                    ctx.lineTo(trail[i].x, trail[i].y);
                }
                ctx.stroke();
            }

            // Draw projectile
            ctx.fillStyle = '#ec4899';
            ctx.beginPath();
            ctx.arc(x, y, 5 * params.projectileSize, 0, Math.PI * 2);
            ctx.fill();

            // Draw velocity vector
            if (trail.length > 1) {
                const lastPoint = trail[trail.length - 1];
                const secondLastPoint = trail[trail.length - 2];
                if (lastPoint && secondLastPoint) {
                    const dx = lastPoint.x - secondLastPoint.x;
                    const dy = lastPoint.y - secondLastPoint.y;
                    const length = Math.sqrt(dx * dx + dy * dy);

                    if (length > 0) {
                        const scale = 10;
                        const vx = dx / length * scale;
                        const vy = dy / length * scale;

                        ctx.strokeStyle = '#ff0000';
                        ctx.lineWidth = 2;
                        ctx.beginPath();
                        ctx.moveTo(lastPoint.x, lastPoint.y);
                        ctx.lineTo(lastPoint.x + vx, lastPoint.y + vy);
                        ctx.stroke();

                        // Draw arrowhead
                        const angle = Math.atan2(vy, vx);
                        ctx.fillStyle = '#ff0000';
                        ctx.beginPath();
                        ctx.moveTo(lastPoint.x + vx, lastPoint.y + vy);
                        ctx.lineTo(
                            lastPoint.x + vx - 10 * Math.cos(angle - Math.PI / 6),
                            lastPoint.y + vy - 10 * Math.sin(angle - Math.PI / 6)
                        );
                        ctx.lineTo(
                            lastPoint.x + vx - 10 * Math.cos(angle + Math.PI / 6),
                            lastPoint.y + vy - 10 * Math.sin(angle + Math.PI / 6)
                        );
                        ctx.closePath();
                        ctx.fill();
                    }
                }
            }
        }

        // Animasi simulasi
        function animate(timestamp) {
            if (!lastTimestamp) lastTimestamp = timestamp;
            const deltaTime = (timestamp - lastTimestamp) / 1000; // in seconds
            lastTimestamp = timestamp;

            if (simulationRunning) {
                // Menambahkan waktu simulasi dengan deltaTime yang dikalikan kecepatan simulasi
                simulationTime += deltaTime * params.simulationSpeed;

                // Konversi sudut ke radian
                const angleRad = params.angle * Math.PI / 180;

                // Hitung komponen kecepatan
                const vx = params.velocity * Math.cos(angleRad);
                const vy = params.velocity * Math.sin(angleRad) - params.gravity * simulationTime;

                // Hitung posisi
                const x = vx * simulationTime;
                const y = (params.velocity * Math.sin(angleRad)) * simulationTime - 0.5 * params.gravity * simulationTime * simulationTime;

                // Scale posisi untuk visualisasi
                const scale = 5; // pixels per meter
                const vizX = simulationCanvas.width / 2 + x * scale;
                const vizY = simulationCanvas.height - 50 - y * scale; // 50 adalah ground offset

                // Hitung kecepatan total
                const velocity = Math.sqrt(vx * vx + vy * vy);

                // Tambahkan titik ke lintasan
                trail.push({ x: vizX, y: vizY });
                if (trail.length > params.trailLength) {
                    trail.shift();
                }

                // Update data grafik
                chartData.time.push(simulationTime);
                chartData.xPos.push(x);
                chartData.yPos.push(y);
                chartData.velocity.push(velocity);

                // Update grafik
                if (chartData.time.length % 5 === 0) {
                    drawCharts();
                }

                // Hitung statistik
                const flightTime = 2 * params.velocity * Math.sin(angleRad) / params.gravity;
                const maxDistance = (params.velocity * params.velocity * Math.sin(2 * angleRad)) / params.gravity;
                const maxHeight = (params.velocity * params.velocity * Math.sin(angleRad) * Math.sin(angleRad)) / (2 * params.gravity);
                const maxVelocity = params.velocity;

                updateStats(flightTime, maxDistance, maxHeight, maxVelocity);

                // Gambar simulasi
                drawSimulation(vizX, vizY);

                // Reset jika proyektil menyentuh tanah
                if (y < 0) {
                    simulationRunning = false;
                    document.getElementById('startBtn').textContent = 'Mulai Ulang';
                }
            } else {
                // Jika tidak running, tetap gambar simulasi (terakhir)
                if (trail.length > 0) {
                    const lastPoint = trail[trail.length - 1];
                    drawSimulation(lastPoint.x, lastPoint.y);
                } else {
                    // Gambar di posisi awal
                    drawSimulation(simulationCanvas.width / 2, simulationCanvas.height - 50);
                }
            }

            animationFrameId = requestAnimationFrame(animate);
        }

        // Setup event listeners
        function setupEventListeners() {
            // Kontrol slider
            document.getElementById('velocity').addEventListener('input', function () {
                params.velocity = parseFloat(this.value);
                document.getElementById('velocityValue').value = params.velocity;
            });

            document.getElementById('velocityValue').addEventListener('input', function () {
                params.velocity = parseFloat(this.value);
                document.getElementById('velocity').value = params.velocity;
            });

            document.getElementById('angle').addEventListener('input', function () {
                params.angle = parseFloat(this.value);
                document.getElementById('angleValue').textContent = params.angle + '°';
            });

            document.getElementById('gravity').addEventListener('input', function () {
                params.gravity = parseFloat(this.value);
                document.getElementById('gravityValue').textContent = params.gravity;
            });

            document.getElementById('trailLength').addEventListener('input', function () {
                params.trailLength = parseInt(this.value);
                document.getElementById('trailValue').textContent = params.trailLength;
            });

            document.getElementById('simulationSpeed').addEventListener('input', function () {
                params.simulationSpeed = parseFloat(this.value);
                document.getElementById('speedValue').textContent = params.simulationSpeed.toFixed(1) + 'x';
            });

            document.getElementById('projectileSize').addEventListener('input', function () {
                params.projectileSize = parseFloat(this.value);
                document.getElementById('sizeValue').textContent = params.projectileSize.toFixed(1);
            });

            // Tombol kontrol
            document.getElementById('startBtn').addEventListener('click', function () {
                if (simulationRunning) {
                    // Jika sudah berjalan, reset dulu
                    resetSimulation();
                } else {
                    // Jika belum berjalan, mulai simulasi
                    simulationRunning = true;
                    lastTimestamp = 0; // Reset timestamp
                    this.textContent = 'Mulai Ulang';
                    if (!animationFrameId) {
                        animationFrameId = requestAnimationFrame(animate);
                    }
                }
            });

            document.getElementById('pauseBtn').addEventListener('click', function () {
                simulationRunning = !simulationRunning;
                this.textContent = simulationRunning ? 'Jeda' : 'Lanjutkan';
            });

            document.getElementById('resetBtn').addEventListener('click', function () {
                resetSimulation();
                simulationRunning = false;
                document.getElementById('startBtn').textContent = 'Mulai Simulasi';
                document.getElementById('pauseBtn').textContent = 'Jeda';
            });

            // Handle window resize
            window.addEventListener('resize', function () {
                // Update canvas sizes
                simulationCanvas.width = simulationCanvas.clientWidth;
                simulationCanvas.height = simulationCanvas.clientHeight;

                trajectoryChart.width = trajectoryChart.clientWidth;
                trajectoryChart.height = trajectoryChart.clientHeight;

                velocityChart.width = velocityChart.clientWidth;
                velocityChart.height = velocityChart.clientHeight;

                // Redraw everything
                drawCharts();
                if (trail.length > 0) {
                    const lastPoint = trail[trail.length - 1];
                    drawSimulation(lastPoint.x, lastPoint.y);
                } else {
                    drawSimulation(simulationCanvas.width / 2, simulationCanvas.height - 50);
                }
            });
        }

        // Inisialisasi aplikasi
        function init() {
            initCanvas();
            setupEventListeners();
            resetSimulation();
            animationFrameId = requestAnimationFrame(animate);
        }

        // Jalankan aplikasi saat halaman siap
        window.addEventListener('load', init);
    </script>

    <!-- My JavaScript -->
    <script src="js/script.js"></script>
</body>

</html>